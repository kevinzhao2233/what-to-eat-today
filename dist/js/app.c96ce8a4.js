(function (t) { function e (e) { for (var r, s, o = e[0], c = e[1], u = e[2], d = 0, h = []; d < o.length; d++)s = o[d], Object.prototype.hasOwnProperty.call(a, s) && a[s] && h.push(a[s][0]), a[s] = 0; for (r in c)Object.prototype.hasOwnProperty.call(c, r) && (t[r] = c[r]); l && l(e); while (h.length)h.shift()(); return i.push.apply(i, u || []), n() } function n () { for (var t, e = 0; e < i.length; e++) { for (var n = i[e], r = !0, o = 1; o < n.length; o++) { var c = n[o]; a[c] !== 0 && (r = !1) }r && (i.splice(e--, 1), t = s(s.s = n[0])) } return t } var r = {}; var a = { app: 0 }; var i = []; function s (e) { if (r[e]) return r[e].exports; var n = r[e] = { i: e, l: !1, exports: {} }; return t[e].call(n.exports, n, n.exports, s), n.l = !0, n.exports }s.m = t, s.c = r, s.d = function (t, e, n) { s.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n }) }, s.r = function (t) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(t, '__esModule', { value: !0 }) }, s.t = function (t, e) { if (1 & e && (t = s(t)), 8 & e) return t; if (4 & e && typeof t === 'object' && t && t.__esModule) return t; var n = Object.create(null); if (s.r(n), Object.defineProperty(n, 'default', { enumerable: !0, value: t }), 2 & e && typeof t !== 'string') for (var r in t)s.d(n, r, function (e) { return t[e] }.bind(null, r)); return n }, s.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return s.d(e, 'a', e), e }, s.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, s.p = '/'; var o = window.webpackJsonp = window.webpackJsonp || []; var c = o.push.bind(o); o.push = e, o = o.slice(); for (var u = 0; u < o.length; u++)e(o[u]); var l = c; i.push([0, 'chunk-vendors']), n() })({ 0: function (t, e, n) { t.exports = n('56d7') }, '0947': function (t, e, n) { 'use strict'; n('0d8a') }, '0d8a': function (t, e, n) {}, '14ff': function (t, e, n) { 'use strict'; n('2c41') }, '2c41': function (t, e, n) {}, '3e11': function (t, e, n) { 'use strict'; n.r(e); n('c740'), n('a434'); function r (t) { var e = t.key; var n = t.value; window.localStorage.setItem(e, JSON.stringify(n)) } function a (t) { var e = window.localStorage.getItem(t); return !!e && !(JSON.parse(e).length < 2) } var i = [{ id: '10086', title: '今天吃什么？', mark: [{ title: '羊杂' }, { title: '土豆丝盖饭' }, { title: '土豆烧牛腩' }, { title: '炒面片' }], hideMark: [{ title: '猪头肉' }, { title: '牛肉面' }] }, { id: '10087', title: '这次谁刷马桶？', mark: [{ title: '赵凯文' }, { title: 'Mine Owner' }, { title: '路帅' }, { title: '赵光涛' }, { title: '李智豪' }] }, { id: '10088', title: '去哪家吃饭啊？', mark: [{ title: '香盛源' }, { title: '牛卖肉' }, { title: '农家菜馆' }, { title: '尔力' }, { title: '牛肉面管' }] }]; var s = { boxs: a('MARK_BOXS') ? JSON.parse(localStorage.getItem('MARK_BOXS')) : i }; var o = { UPDATE: function (t, e) { var n = t.boxs.findIndex(function (t) { return t.id === e.id }); n > -1 && (t.boxs.splice(n, 1, e), this.commit('mark/SAVE_BOXS')) }, REMOVE_MARK_BOX: function (t, e) { var n = e.id; var r = t.boxs.findIndex(function (t) { return t.id === n }); r > -1 && (t.boxs.splice(r, 1), this.commit('mark/SAVE_BOXS')) }, SAVE_BOXS: function (t) { r({ key: 'MARK_BOXS', value: t.boxs }) } }; var c = { update: function (t, e) { var n = t.commit; n('UPDATE', Object.assign({}, e)) }, removeMarkBox: function (t, e) { var n = t.commit; n('REMOVE_MARK_BOX', e) } }; e.default = { namespaced: !0, state: s, mutations: o, actions: c } }, '3e8e': function (t, e, n) {}, '454c': function (t, e, n) { 'use strict'; n('b816') }, '459e': function (t, e, n) {}, '46ad': function (t, e, n) { 'use strict'; n('459e') }, '48fa': function (t, e, n) {}, '56d7': function (t, e, n) { 'use strict'; n.r(e); n('e260'), n('e6cf'), n('cca6'), n('a79d'); var r = n('2b0e'); var a = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { attrs: { id: 'app' } }, [n('router-view')], 1) }; var i = []; var s = (n('7c55'), n('2877')); var o = {}; var c = Object(s.a)(o, a, i, !1, null, null, null); var u = c.exports; var l = n('9483'); Object(l.a)(''.concat('/', 'service-worker.js'), { ready: function () { console.log('App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB') }, registered: function () { console.log('Service worker has been registered.') }, cached: function () { console.log('Content has been cached for offline use.') }, updatefound: function () { console.log('New content is downloading.') }, updated: function () { console.log('New content is available; please refresh.') }, offline: function () { console.log('No internet connection found. App is running in offline mode.') }, error: function (t) { console.error('Error during service worker registration:', t) } }); var d = n('8c4f'); var h = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { attrs: { id: 'layout' } }, [n('Header'), n('router-view')], 1) }; var f = []; var m = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'layout-header' }, [n('span', { staticClass: 'title' }, [n('i', { staticClass: 'icon ri-home-3-line', class: t.header.theme, on: { mousedown: t.goHome } }), t._v(' ' + t._s(t.header.title) + ' ')])]) }; var p = []; var v = (n('ac1f'), n('5319'), n('5530')); var k = n('2f62'); var b = { name: 'Header', data: function () { return { isShowOpt: !1 } }, computed: Object(v.a)({}, Object(k.b)({ header: function (t) { return t.app.header } })), methods: { goHome: function () { this.$router.replace({ name: 'Home' }) } } }; var g = b; var _ = (n('680f'), Object(s.a)(g, m, p, !1, null, 'a2f7a09e', null)); var M = _.exports; var O = { name: 'Layout', components: { Header: M } }; var y = O; var S = (n('46ad'), Object(s.a)(y, h, f, !1, null, '9c616d8a', null)); var E = S.exports; var w = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'page-home' }, [t._l(t.markBoxs, function (t) { return n('Card', { key: t.id, attrs: { data: t } }) }), n('div', { staticClass: 'btn' }, [t._v('添加')])], 2) }; var x = []; var C = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'com-home-card', on: { mousedown: t.goSurprise } }, [n('div', { staticClass: 'title' }, [t._v(t._s(t.data.title))]), t.handlerStatus ? n('div', { staticClass: 'handler-box' }, [n('div', { staticClass: 'handler', on: { mousedown: function (e) { return e.stopPropagation(), t.goEdit(e) } } }, [n('i', { staticClass: 'ri-edit-2-fill' })]), n('div', { staticClass: 'handler', on: { mousedown: function (e) { return e.stopPropagation(), t.remove(e) } } }, [n('i', { staticClass: 'ri-close-circle-fill' })])]) : t._e()]) }; var $ = []; var j = { name: 'Card', props: { data: { type: Object, default: null }, handlerStatus: { type: Boolean, default: !0 } }, methods: { goSurprise: function () { this.$router.push({ name: 'Surprise', query: { id: this.data.id } }) }, goEdit: function () { this.$router.push({ name: 'Edit', query: { type: 'edit', id: this.data.id } }) }, remove: function () { this.$store.dispatch('mark/removeMarkBox', { id: this.data.id }) } } }; var T = j; var H = (n('84ad'), Object(s.a)(T, C, $, !1, null, null, null)); var A = H.exports; var I = { name: 'Home', components: { Card: A }, computed: Object(v.a)({}, Object(k.b)({ markBoxs: function (t) { return t.mark.boxs } })), created: function () { this.$store.dispatch('app/changeHeaderTitle', { title: '今天吃什么？' }), this.$store.dispatch('app/changeHeaderTheme', { theme: 'hide' }) } }; var B = I; var N = (n('0947'), Object(s.a)(B, w, x, !1, null, '2cc31136', null)); var R = N.exports; var P = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'page-edit' }, [n('div', { staticClass: 'banner' }, [n('input', { directives: [{ name: 'model', rawName: 'v-model', value: t.title, expression: 'title' }], ref: 'input', attrs: { type: 'text', placeholder: '这里输入一个名字' }, domProps: { value: t.title }, on: { change: t.changeTitle, input: function (e) { e.target.composing || (t.title = e.target.value) } } }), n('span', { staticClass: 'quick-btn', on: { click: t.goSurprise } }, [t._v('马上来一签')])]), n('div', { staticClass: 'top' }, t._l(t.res.mark, function (e) { return n('Mark', { key: e.title, attrs: { data: e, showOpt: t.markStatus === 1 }, on: { 'on-remove': function (n) { return t.removeMark(e) } }, nativeOn: { mousedown: function (n) { return t.toggleMark(e) } } }) }), 1), n('div', { staticClass: 'bottom' }, t._l(t.res.hideMark, function (e) { return n('Mark', { key: e.title, attrs: { data: e, showOpt: t.markStatus === 1, hide: !0 }, on: { 'on-remove': function (n) { return t.removeMark(e) } }, nativeOn: { mousedown: function (n) { return t.toggleMark(e) } } }) }), 1), n('div', { staticClass: 'bottom-btn-box' }, [n('div', { staticClass: 'btn btn-s', on: { mousedown: function (e) { t.markStatus === 0 ? t.handleRemoveMark() : t.handleCancel() } } }, [t._v(t._s(t.markStatus === 0 ? '编辑' : '完成'))]), n('div', { staticClass: 'btn btn-m', on: { mousedown: t.handleAddMark } }, [t._v('添加')])]), t.addMaskState ? n('BaseMask', { on: { cancel: t.closeMask } }, [n('div', { staticClass: 'input-box' }, [n('input', { directives: [{ name: 'model', rawName: 'v-model', value: t.markInput, expression: 'markInput' }], ref: 'mackInput', staticClass: 'mask-input', attrs: { placeholder: '想要什么呢？', type: 'text' }, domProps: { value: t.markInput }, on: { keypress: function (e) { return !e.type.indexOf('key') && t._k(e.keyCode, 'enter', 13, e.key, 'Enter') ? null : t.addMark(e) }, input: function (e) { e.target.composing || (t.markInput = e.target.value) } } }), n('div', { staticClass: 'mask-btn', on: { mousedown: t.addMark } }, [t._v('添加')])])]) : t._e()], 1) }; var D = []; var q = (n('7db0'), n('c740'), n('a434'), n('498a'), function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'com-edit-mark', class: { hide: t.hide } }, [n('span', { staticClass: 'txt' }, [t._v(t._s(t.data.title))]), t.showOpt ? n('div', { staticClass: 'opt', on: { mousedown: function (e) { return e.stopPropagation(), t.removeMark(e) } } }, [n('i', { staticClass: 'ri-close-circle-fill' })]) : t._e()]) }); var X = []; var K = { name: 'Mark', props: { data: { type: Object, default: null }, showOpt: { type: Boolean, default: !1 }, hide: { type: Boolean, default: !1 } }, methods: { removeMark: function () { this.$emit('on-remove') } } }; var G = K; var U = (n('14ff'), Object(s.a)(G, q, X, !1, null, null, null)); var J = U.exports; var V = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'com-base-mask', on: { mousedown: function (e) { return e.target !== e.currentTarget ? null : t.cancel(e) } } }, [t._t('default')], 2) }; var L = []; var F = { name: 'BaseMask', methods: { cancel: function () { this.$emit('cancel') } } }; var z = F; var Q = (n('454c'), Object(s.a)(z, V, L, !1, null, '4d8ece2c', null)); var W = Q.exports; var Y = { name: 'Edit', components: { Mark: J, BaseMask: W }, data: function () { return { pageStatus: 'create', res: {}, addMaskState: !1, title: '', markInput: '', markStatus: 0 } }, computed: Object(v.a)({}, Object(k.b)({ markBoxs: function (t) { return t.mark.boxs } })), created: function () { this.init() }, methods: { init: function () { this.$route.query.type === 'edit' && (this.pageStatus = 'edit', this.$store.dispatch('app/changeHeaderTitle', { title: '' }), this.edit()), this.$route.query.type === 'create' && (this.pageStatus = 'create', this.$store.dispatch('app/changeHeaderTitle', { title: '新建' }), this.create()), this.$store.dispatch('app/changeHeaderTheme', { theme: 'white' }) }, edit: function () { var t = this; this.res = this.markBoxs.find(function (e) { return e.id === t.$route.query.id }), this.title = this.res.title }, create: function () {}, changeTitle: function () { this.res.title = this.title, this.$store.dispatch('mark/update', this.res) }, goSurprise: function () { this.$router.push({ name: 'Surprise', query: { id: this.res.id } }) }, closeMask: function () { this.addMaskState = !1, this.markInput = '' }, handleRemoveMark: function () { this.markStatus = 1 }, handleCancel: function () { this.markStatus = 0 }, handleAddMark: function () { var t = this; this.addMaskState = !0, this.$nextTick(function () { t.$refs.mackInput.focus() }) }, addMark: function () { this.markInput.trim() && (this.res.mark.push({ title: this.markInput.trim() }), this.$store.dispatch('mark/update', this.res)), this.markInput = '' }, removeMark: function (t) { console.log('remove', t); var e = this.res.mark.findIndex(function (e) { return e.title === t.title }); if (e > -1) this.res.mark.splice(e, 1); else { var n = this.res.hideMark.findIndex(function (e) { return e.title === t.title }); this.res.hideMark.splice(n, 1) } this.$store.dispatch('mark/update', this.res) }, toggleMark: function (t) { var e = this.res.mark.findIndex(function (e) { return e.title === t.title }); if (console.log(e, this.res), e > -1) { if (this.res.mark.length === 1) return; this.res.hideMark || (this.res.hideMark = []), this.res.hideMark.push(this.res.mark[e]), this.res.mark.splice(e, 1) } else { var n = this.res.hideMark.findIndex(function (e) { return e.title === t.title }); this.res.mark || (this.res.mark = []), this.res.mark.push(this.res.hideMark[n]), this.res.hideMark.splice(n, 1) } this.$store.dispatch('mark/update', this.res) } } }; var Z = Y; var tt = (n('83c5'), Object(s.a)(Z, P, D, !1, null, '5306adfa', null)); var et = tt.exports; var nt = function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'page-surprise', on: { mousedown: t.start } }, [n('div', { staticClass: 'main' }, [t._v(t._s(t.current))])]) }; var rt = []; var at = { name: 'Surprise', data: function () { return { res: [], current: '点击屏幕开始抽签', timer: 0, interval: 0, count: 0 } }, computed: Object(v.a)({}, Object(k.b)({ markBoxs: function (t) { return t.mark.boxs } })), created: function () { this.init() }, methods: { init: function () { var t = this; console.log(this.markBoxs); var e = this.markBoxs.find(function (e) { return e.id === t.$route.query.id }); this.res = e.mark, this.$store.dispatch('app/changeHeaderTitle', { title: e.title }), this.$store.dispatch('app/changeHeaderTheme', { theme: 'colorful' }) }, start: function () { var t = this; this.clear(), this.loop(), this.timer = setTimeout(function () { clearInterval(t.interval) }, 2e3) }, loop: function () { var t = this; this.interval = setInterval(function () { t.timeHandler() }, 150) }, timeHandler: function () { var t = Math.floor(Math.random() * this.res.length); this.current = this.res[t].title; while (this.res.length > 1 && t === this.count)t = Math.floor(Math.random() * this.res.length); this.count = t, this.current = this.res[t].title, console.log(t) }, clear: function () { this.timer && clearTimeout(this.timer), this.interval && clearInterval(this.interval) } }, beforeDestroy: function () { this.clear() } }; var it = at; var st = (n('6f3e'), Object(s.a)(it, nt, rt, !1, null, '71ea687f', null)); var ot = st.exports; var ct = function () { var t = this; var e = t.$createElement; t._self._c; return t._m(0) }; var ut = [function () { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'about' }, [n('h1', [t._v('This is an about page')])]) }]; var lt = {}; var dt = Object(s.a)(lt, ct, ut, !1, null, null, null); var ht = dt.exports; r.a.use(d.a); var ft = [{ path: '/', component: E, children: [{ path: '', name: 'Home', component: R }, { path: '/edit', name: 'Edit', component: et }, { path: '/surprise', name: 'Surprise', component: ot }, { path: '/about', name: 'About', component: ht }] }]; var mt = new d.a({ routes: ft }); var pt = mt; var vt = (n('13d5'), n('d3b7'), n('ddb0'), { header: function (t) { return t.app.header } }); var kt = vt; r.a.use(k.a); var bt = n('c653'); var gt = bt.keys().reduce(function (t, e) { var n = e.replace(/^\.\/(.*)\.\w+$/, '$1'); var r = bt(e); return t[n] = r.default, t }, {}); var _t = new k.a.Store({ modules: gt, getters: kt }); var Mt = _t; n('3e8e'), n('ab05'); r.a.config.productionTip = !1, new r.a({ router: pt, store: Mt, render: function (t) { return t(u) } }).$mount('#app') }, '5ba8': function (t, e, n) {}, '680f': function (t, e, n) { 'use strict'; n('6ae4') }, '6ae4': function (t, e, n) {}, '6f3e': function (t, e, n) { 'use strict'; n('48fa') }, '7c55': function (t, e, n) { 'use strict'; n('5ba8') }, '83c5': function (t, e, n) { 'use strict'; n('a777') }, '84ad': function (t, e, n) { 'use strict'; n('a8ba') }, a777: function (t, e, n) {}, a8ba: function (t, e, n) {}, b816: function (t, e, n) {}, c653: function (t, e, n) { var r = { './app.js': 'd9cd', './mark.js': '3e11' }; function a (t) { var e = i(t); return n(e) } function i (t) { if (!n.o(r, t)) { var e = new Error("Cannot find module '" + t + "'"); throw e.code = 'MODULE_NOT_FOUND', e } return r[t] }a.keys = function () { return Object.keys(r) }, a.resolve = i, t.exports = a, a.id = 'c653' }, d9cd: function (t, e, n) { 'use strict'; n.r(e); var r = { header: { title: '今天吃什么', theme: 'colorful' }, editMarkStatus: 0 }; var a = { CHANGE_HEADER_TITLE: function (t, e) { var n = e.title; t.header.title = n }, CHANGE_HEADER_THEME: function (t, e) { var n = e.theme; t.header.theme = n }, CHANGE_EDIT_MARK_STATUS: function (t, e) { var n = e.status; t.editMarkStatus = n } }; var i = { changeHeaderTitle: function (t, e) { var n = t.commit; n('CHANGE_HEADER_TITLE', e) }, changeHeaderTheme: function (t, e) { var n = t.commit; n('CHANGE_HEADER_THEME', e) }, changeEditMarkStatus: function (t, e) { var n = t.commit; n('CHANGE_EDIT_MARK_STATUS', e) } }; e.default = { namespaced: !0, state: r, mutations: a, actions: i } } })
// # sourceMappingURL=app.c96ce8a4.js.map
